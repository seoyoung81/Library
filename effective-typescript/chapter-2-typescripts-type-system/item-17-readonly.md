# ğŸ“ ì•„ì´í…œ 17 ë³€ê²½ ê´€ë ¨ëœ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ readonly ì‚¬ìš©í•˜ê¸°

ì‚¼ê°ìˆ˜(1, 1+2, 1+2+3)ë¥¼ ì¶œë ¥í•˜ëŠ” ì½”ë“œì´ë‹¤.

```typescript
function printTriangles(n: number) {
  const nums = [];
  for (let i = 0; i < n; i++) {
    nums.push(i);
    console.log(arraySum(nums));
  }
}
```

ì‹¤í–‰ê²°ê³¼

```typescript
> printTriangles(5)
0
1
2
3
4
```

`arraySum`ì´ `nums`ì„ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ê°„ì£¼í•´ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ í•´ê²°í•œë‹¤.

```typescript
function arraySum(arr: number[]) {
  let sum = 0, num;
  while ((num = arr.pop()) !== undefined) {
    sum += num;
  }
  return sum;
}
```

ì´ í•¨ìˆ˜ëŠ” ë°°ì—´ ì•ˆì˜ ìˆ«ìë“¤ì„ ëª¨ë‘ í•©ì¹œë‹¤. ê³„ì‚°ì´ ëë‚˜ë©´ ì›ë˜ ë°°ì—´ì´ ì „ë¶€ ë¹„ê²Œ ëœë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ ë°°ì—´ì€ ë‚´ìš©ì„ ë³€ê²½í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ ì˜¤ë¥˜ ì—†ì´ í†µê³¼í•˜ê²Œ ëœë‹¤.

## ğŸ“ readonly

ì˜¤ë¥˜ì˜ ë²”ìœ„ë¥¼ ì¢íˆê¸° ìœ„í•´ `arraySum`ì´ ë°°ì—´ì„ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì„ ì–¸ì„ í•´ë³´ì. `readonly` ì ‘ê·¼ ì œì–´ìë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

```typescript
function arraySum(arr: readonly number[]) {
  let sum = 0, num;
  while ((num = arr.pop()) !== undefined) {
      // 'readonly number[]' í˜•ì‹ì— 'pop'ì†ì„±ì´ ì—†ë‹¤.
    sum += num;
  }
  return sum;
}
```

**â­ï¸ `readonly number[]`ëŠ” íƒ€ì…ì´ê³ , `number[]`ì™€ êµ¬ë¶„ë˜ëŠ” ëª‡ ê°€ì§€ íŠ¹ì§•ì´ ìˆë‹¤.**

1. ë°°ì—´ì˜ ìš”ì†Œë¥¼ ì½ì„ ìˆ˜ ìˆì§€ë§Œ, ì“¸ ìˆ˜ëŠ” ì—†ë‹¤.
2. `length`ë¥¼ ì½ì„ ìˆ˜ ìˆì§€ë§Œ, ë°”ê¿€ ìˆ˜ëŠ” ì—†ë‹¤. (ë°°ì—´ ë³€ê²½)
3. ë°°ì—´ì„ ë³€ê²½í•˜ëŠ” `pop`ì„ ë¹„ë¡¯í•œ ë‹¤ë¥¸ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.

`number[]`ëŠ” `readonly number[]`ë³´ë‹¤ ê¸°ëŠ¥ì´ ë§ê¸° ë•Œë¬¸ì—, `readonly number[]`ì˜ ì„œë¸Œíƒ€ì…ì´ ëœë‹¤. ë”°ë¼ì„œ ë³€ê²½ ê°€ëŠ¥í•œ ë°°ì—´ì„ `readonly` ë°°ì—´ì— í• ë‹¹í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ë°˜ëŒ€ëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤.

```typescript
const a: number[] = [1, 2, 3];
const b: readonly number[] = a;
const c: number[] = b;
//    ~ Type 'readonly number[]' is 'readonly' and cannot be
//      assigned to the mutable type 'number[]'
// readonly number[] íƒ€ì…ì€ readonlyì´ë¯€ë¡œ ë³€ê²½ ê°€ëŠ¥í•œ number[] íƒ€ì…ì— í• ë‹¹ë  ìˆ˜ ì—†ë‹¤.
```

íƒ€ì… ë‹¨ì–¸ë¬¸ ì—†ì´ `readonly` ì ‘ê·¼ì œì–´ìë¥¼ ì œê±°í•  ìˆ˜ ìˆë‹¤ë©´ `readonly`ëŠ” ì“¸ëª¨ ì—†ìœ¼ë¯€ë¡œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ê²Œ ë§ë‹¤.

**â­ï¸ ë§¤ê°œë³€ìˆ˜ë¥¼ readonlyë¡œ ì„ ì–¸í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¼ì´ ìƒê¸´ë‹¤.**

1. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ë§¤ê°œë³€ìˆ˜ê°€ í•¨ìˆ˜ ë‚´ì—ì„œ ë³€ê²½ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ì²´í¬í•œë‹¤.
2. í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œëŠ” í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ë³´ì¥ì„ ë°›ê²Œ ëœë‹¤.
3. í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ í•¨ìˆ˜ì— readonly ë°°ì—´ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì„ ìˆ˜ë„ ìˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ëª…ì‹œì ìœ¼ë¡œ ì–¸ê¸‰ì´ ì—†ì§€ë§Œ, í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ê°€ì •í•œë‹¤.&#x20;

â†’ íƒ€ì… ì²´í¬ì— ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤. (ì•„ì´í…œ30, 31) ëª…ì‹œì ì¸ ë°©ë²•ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì»´íŒŒì¼ëŸ¬ì™€ ì‚¬ëŒì—ê²Œ ëª¨ë‘ ì¢‹ë‹¤.

ì• ì˜ˆì œë¥¼ ê³ ì³ë³´ì. ë°°ì—´ì„ ë³€ê²½í•˜ì§€ ì•Šìœ¼ë©´ ëœë‹¤.

```typescript
function arraySum(arr: readonly number[]) {
  let sum = 0;
  for (const num of arr) {
    sum += num;
  }
  return sum;
}
```

**â­ï¸ ë§Œì•½ í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ readonlyë¡œ ì„ ì–¸í•´ì•¼í•œë‹¤.**&#x20;

ë” ë„“ì€ íƒ€ì…ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆê³ , ì˜ë„ì¹˜ ì•Šì€ ë³€ê²½ì´ ë°©ì§€ëœë‹¤.

### readonlyì˜ ë‹¨ì 

#### ë§¤ê°œë³€ìˆ˜ê°€ readonlyë¡œ ì„ ì–¸ë˜ì§€ ì•Šì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•  ê²½ìš°

ë§Œì•½ í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ ë„ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤ë©´ `readonly`ë¡œ ì„ ì–¸í•˜ë©´ ëœë‹¤. í•˜ì§€ë§Œ, ì–´ë˜ í•¨ìˆ˜ë¥¼ `readonly`ë¡œ ë§Œë“¤ë©´, ê·¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ë„ `readonly`ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.&#x20;

â†’ ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª…í™•íˆ í•˜ê³  íƒ€ì… ì•ˆì •ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

â†’ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ìˆëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš°, íƒ€ì… ì„ ì–¸ì„ ë°”ê¿€ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ íƒ€ì… ë‹¨ì–¸ë¬¸(as number\[])ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

**â­ï¸ readonlyë¥¼ ì‚¬ìš©í•˜ë©´ ì§€ì—­ ë³€ìˆ˜ì™€ ê´€ë ¨ëœ ëª¨ë“  ì¢…ë¥˜ì˜ ë³€ê²½ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.**

ì—°ì†ëœ í–‰ì„ ê°€ì ¸ì™€ì„œ ë¹ˆì¤„ì„ ê¸°ì¤€ìœ¼ë¡œ êµ¬ë¶„ë˜ëŠ” ë‹¨ë½ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.

```typescript
function parseTaggedText(lines: string[]) : string[][] {
    const para : string[][] = [];
    const currPara : string[] = [];

    const addPara = () => {
        if (currPara.length) {
            para.push(currPara)  // ì˜¤ë¥˜ë°œìƒì§€ì  1 (ë°°ì—´ì˜ ì°¸ì¡°ê°€ ì‚½ì…)
            currPara.length = 0; // ì˜¤ë¥˜ë°œìƒì§€ì  2 (ë°°ì—´ì„ ë¹„ì›€)
        }
    }

    for (const line of lines) {
        if (!line) {
            addPara();
        } else {
            currPara.push(line);
        }
    }
    addPara();
    return para;
}

// output : [[],[],[]]
```

ì´ ì½”ë“œì˜ ë¬¸ì œì ì€ ë³„ì¹­ê³¼ ë³€ê²½ì„ ë™ì‹œì— ì‚¬ìš©í•˜ì—¬ ë°œìƒí–ˆë‹¤.

`currPara`ì˜ ë‚´ìš©ì´ ì‚½ì…ë˜ì§€ ì•Šê³  ë°°ì—´ì˜ ì°¸ì¡°ê°€ ì‚½ì…ë˜ì—ˆë‹¤. ë”°ë¼ì„œ `currPara` ì˜ ê¸¸ì´ê°€ 0ì´ ë˜ë©´ `para`ë¡œ ë“¤ì–´ê°„ `currPara`ì˜ ê¸¸ì´ ë˜í•œ 0ì´ ë˜ì–´ ë¹ˆ ë°°ì—´ë¡œ ë°˜í™˜ë˜ì—ˆë‹¤. ë”°ë¼ì„œ ì´ ì½”ë“œëŠ” ìƒˆ ë‹¨ë½ì„ `para`ì— ì§‘ì–´ë„£ê³  ë°”ë¡œ ì§€ì›Œ ë²„ë¦°ë‹¤.

`currPara`ë¥¼ `readonly`ë¡œ ì„ ì–¸í•˜ì—¬ ì˜¤ë¥˜ë¥¼ í•´ê²°í•œë‹¤.

```typescript
function parseTaggedText(lines: string[]) : string[][] {
    const para : string[][] = [];
    const currPara : readonly string[] = [];

    const addPara = () => {
        if (currPara.length) {
            para.push(currPara)
          	// 1. readonly string[]ì†ì„±ì˜ ì¸ìˆ˜ëŠ” string[]ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
            currPara.length = 0;
          	// 2. ì½ê¸° ì „ìš© ì†ì„±ìœ¼ë¡œ 'length'ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
        }
    }

    for (const line of lines) {
        if (!line) {
            addPara();
        } else {
            currPara.push(line);
          	// 3. readonly string[] í˜•ì‹ì— push ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.
        }
    }
    addPara();
    return para;
}
```

`currPara`ë¥¼ `let`ìœ¼ë¡œ ì„ ì–¸í•˜ê³  ë³€í™˜ì´ ì—†ëŠ” ë©”ì„œë“œë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë‘ ê°œì˜ ì˜¤ë¥˜ë¥¼ ê³ ì¹  ìˆ˜ ìˆë‹¤.

```typescript
let currPara: readonly string[] = [];
// ...
currPara = [];    // ë°°ì—´ì„ ë¹„ì›€
// ...
currPara = currPara.concat((line));
```

`push`ì™€ ë‹¬ë¦¬ `concat`ì€ ì›ë³¸ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³ (3ë²ˆ ì˜¤ë¥˜ í•´ê²°), ìƒˆ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤. ì„ ì–¸ë¶€ë¥¼ `const`ì—ì„œ `let`ìœ¼ë¡œ ë³€ê²½ í›„ (2ë²ˆ ì˜¤ë¥˜ í•´ê²°)`readonly`ë¥¼ ì¶”ê°€í•˜ì—¬ í•œìª½ì˜ ë³€ê²½ ê°€ëŠ¥ì„±ì„ ë˜ ë‹¤ë¥¸ ìª½ìœ¼ë¡œ ì˜®ê¸´ ê²ƒ ì´ë‹¤.

`currPara` ë³€ìˆ˜ëŠ” ê°€ë¦¬í‚¤ëŠ” ë°°ì—´ì„ ììœ ë¡­ê²Œ ë³€ê²½í•  ìˆ˜ ìˆì§€ë§Œ, ê·¸ ë°°ì—´ ìì²´ëŠ” ë³€ê²½í•˜ì§€ ëª»í•˜ê²Œ ëœë‹¤.

â­ï¸ 1ë²ˆ ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ëŠ” 3ê°€ì§€ ë°©ë²•

1. currParaì˜ ë³µì‚¬ë³¸ì„ ë§Œë“ ë‹¤.

```typescript
paragraphs.push([...currPara]);
```

currParaëŠ” readonlyë¡œ ìœ ì§€ë˜ì§€ë§Œ, ë³µì‚¬ë³¸ì€ ì›í•˜ëŠ”ëŒ€ë¡œ ë³€ê²½ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ì˜¤ë¥˜ê°€ ì‚¬ë¼ì§„ë‹¤.

2. `paragraphs`ë¥¼ `readonly string[]`ì˜ ë°°ì—´ë¡œ ë³€ê²½í•œë‹¤.

```typescript
const paragraphs: (readonly string[])[] = [];
```

3. ë°°ì—´ì˜ `readonly` ì†ì„±ì„ ì œê±°í•˜ê¸° ìœ„í•´ ë‹¨ì–¸ë¬¸ì„ ì‚¬ìš©í•œë‹¤.

```typescript
paragraphs.push(currPara as string[]);
```



**â­ï¸ readonlyëŠ” ì–•ê²Œ ë™ì‘í•œë‹¤ëŠ” ê²ƒì— ìœ ì˜í•´ì•¼ í•œë‹¤.**

`readonly string[][]` ì—ì„œ ë§Œì•½ ê°ì²´ì˜ `readonly` ë°°ì—´ì´ ìˆë‹¤ë©´, ê·¸ ê°ì²´ ìì²´ëŠ” `readonly`ê°€ ì•„ë‹ˆë‹¤.

```typescript
const dates: readonly Date[] = [new Date()];
dates.push(new Date()); // 'readonly Date[]' í˜•ì‹ì— 'push' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.
dates[0].setFullyear(2000); // OK
```

`Readonly` ì œë„ˆë¦­ì—ë„ í•´ë‹¹ëœë‹¤.

```typescript
interface Outer {
    inner: {
        x: number
    }
}

const o: Readonly<Outer> = {inner: {x:0}}
o.inner = {x:1}; // ì½ê¸° ì „ìš© ì†ì„±ì´ê¸° ë•Œë¬¸ì— 'inner'ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
o.inner.x = 1;

// íƒ€ì… ë³„ì¹­ì„ ë§Œë“¤ë©´ ì–´ë–»ê²Œ ë™ì‘í–ˆëŠ” ì§€ ì•Œ ìˆ˜ ìˆë‹¤.
type T = Readonly<Outer>
// Type T = {
//     readonly inner: {
//         x:number;
//     }
// }
```

ì¤‘ìš”í•œ ì ì€ `readonly` ì ‘ê·¼ì œì–´ìëŠ” innerì— ì ìš©ë˜ëŠ” ê²ƒì´ì§€ xëŠ” ì•„ë‹ˆë¼ëŠ” ê²ƒì´ë‹¤. ì œë„ˆë¦­ì„ ë§Œë“¤ë©´ ê¹Šì€ `readonly` íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ì œë„ˆë¦­ì€ ë§Œë“¤ê¸° ê¹Œë‹¤ë¡œì›Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë‚«ë‹¤. (ts-essentialsì— ìˆëŠ” DeepReadonlyë¥¼ ì‚¬ìš©)

ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ì—ë„ `readonly`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì½ê¸°ëŠ” í—ˆìš©í•˜ë˜ ì“°ê¸°ë¥¼ ë°©ì§€í•˜ëŠ” íš¨ê³¼ê°€ ìˆë‹¤.

## ğŸ“ ìš”ì•½

* ë§Œì•½ í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, readonlyë¡œ ì„ ì–¸í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. readonly ë§¤ê°œë³€ìˆ˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª…í™•í•˜ê²Œ í•˜ë©°, ë§¤ê°œë³€ìˆ˜ê°€ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë°©ì§€í•œë‹¤.
* readonlyë¥¼ ì‚¬ìš©í•˜ë©´ ë³€ê²½í•˜ë©´ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆê³ , ë³€ê²½ì´ ë°œìƒí•˜ëŠ” ì½”ë“œë„ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë‹¤.
* constì™€ readonlyì˜ ì°¨ì´ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.
* readonlyëŠ” ì–•ê²Œ ë™ì‘í•œë‹¤.
