# βοΈ 7.2 μ»¬λ ‰μ… μΊ΅μν™”ν•κΈ° (Encapsulate Collection)

λ¦¬ν©ν„°λ§ μ „

```javascript
class Person {
  get courses() {return this._courses;}
  set courses(aList) {this._courses = aList;}
```

λ¦¬ν©ν„°λ§ ν›„

```javascript
class Person {
  get courses() {return this._courses.slice();}
  addCourse(aCourse) {...}
  removeCourse(aCourse) {...}
```

## π§· λ°°κ²½

μ €μλ” κ°€λ³€ λ°μ΄ν„°λ¥Ό λ¨λ‘ μΊ΅μν™”ν•λ‹¤. λ°μ΄ν„° κµ¬μ΅°κ°€ μ–Έμ  μ–΄λ–»κ² μμ •λλ”μ§€ νμ•…ν•κΈ° μ‰¬μ›μ„ ν•„μ”ν• μ‹μ μ— λ°μ΄ν„° κµ¬μ΅°λ¥Ό λ³€κ²½ν•κΈ°λ„ μ‰¬μ–΄μ§€κΈ° λ•λ¬Έμ΄λ‹¤.

μ»¬λ ‰μ… λ³€μλ΅μ μ ‘κ·Όμ„ μΊ΅μν™”ν•λ©΄μ„ κ²ν„°κ°€ μ»¬λ ‰μ… μμ²΄λ¥Ό λ°ν™ν•λ„λ΅ ν•λ‹¤λ©΄, κ·Έ μ»¬λ ‰μ…μ„ κ°μ‹Ό ν΄λμ¤κ°€ λμΉμ±„μ§€ λ»ν•λ” μƒνƒμ—μ„ μ»¬λ ‰μ…μ μ›μ†λ“¤μ΄ λ°”λ€μ–΄λ²„λ¦΄ μ μλ‹¤.

`add()`μ™€ `remove()`λΌλ” μ΄λ¦„μ μ»¬λ ‰μ… λ³€κ²½μ λ©”μ„λ“λ¥Ό λ§λ“ λ‹¤.

μ›λ³Έ λ¨λ“ λ°–μ—μ„λ” μ»¬λ ‰μ…μ„ μμ •ν•μ§€ μ•λ” μµκ΄€μ„ κ°–κ³  μλ‹¤λ©΄ μ΄λ° λ©”μ„λ“λ¥Ό μ κ³µν•λ” κ²ƒλ§μΌλ΅λ„ μ¶©λ¶„ν•  μ μλ‹¤. μ»¬λ ‰μ… κ²ν„°κ°€ μ›λ³Έ μ»¬λ ‰μ…μ„ λ°ν™ν•μ§€ μ•κ² λ§λ“¤μ–΄μ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤μλ΅ μ»¬λ ‰μ…μ„ λ°”κΏ€ κ°€λ¥μ„±μ„ μ°¨λ‹¨ν•λ” κ²ƒμ΄ λ‚«λ‹¤.

## π§· μ μ°¨

1. μ•„μ§ μ»¬λ ‰μ…μ„ μΊ΅μν™”ν•μ§€ μ•μ•λ‹¤λ©΄ λ³€μ μΊ΅μν™”ν•κΈ°λ¶€ν„° ν•λ‹¤.
2. μ»¬λ ‰μ…μ— μ›μ†λ¥Ό μ¶”κ°€/μ κ±°ν•λ” ν•¨μλ¥Ό μ¶”κ°€ν•λ‹¤.\
   β΅οΈ μ»¬λ ‰μ… μμ²΄λ¥Ό ν†µμ§Έλ΅ λ°”κΎΈλ” μ„Έν„°λ” μ κ±°ν•λ‹¤. μ„Έν„°λ¥Ό μ κ±°ν•  μ μ—†λ‹¤λ©΄ μΈμλ΅ λ°›μ€ μ»¬λ ‰μ…μ„ λ³µμ ν•΄ μ €μ¥ν•λ„λ΅ ν•λ‹¤.
3. μ •μ  κ²€μ‚¬λ¥Ό μν–‰ν•λ‹¤.
4. μ»¬λ ‰μ…μ„ μ°Έμ΅°ν•λ” λ¶€λ¶„μ„ λ¨λ‘ μ°Ύλ”λ‹¤. μ»¬λ ‰μ…μ λ³€κ²½μλ¥Ό νΈμ¶ν•λ” μ½”λ“κ°€ λ¨λ‘ μ•μ—μ„ μ¶”κ°€ν• μ¶”κ°€/μ κ±° ν•¨μλ¥Ό νΈμ¶ν•λ„λ΅ μμ •ν•λ‹¤. ν•λ‚μ”© μμ •ν•  λ•λ§λ‹¤ ν…μ¤νΈν•λ‹¤.
5. μ»¬λ ‰μ… κ²ν„°λ¥Ό μμ •ν•΄μ„ μ›λ³Έ λ‚΄μ©μ„ μμ •ν•  μ μ—†λ” μ½κΈ°μ „μ© ν”„λ½μ‹λ‚ λ³µμ λ³Έμ„ λ°ν™ν•κ² ν•λ‹¤.
6. ν…μ¤νΈν•λ‹¤.

## π§· λ¦¬ν©ν„°λ§ μ „

```javascript
// Person ν΄λμ¤...
  constructor(name) {
    this._name = name;
    this._course = [];
  }
  get name() {return this._name;}
  get courses() {return this._courses;}
  set courses(aList) {this._courses = aList;}
  
// Course ν΄λμ¤...
  constructor(name, isAdvanced){
    this._name = name;
    this._isAdvanced = isAdvanced;
  }
  get name() {return this._name;}
  get isAdvanced() {return this._isAdvanced;}
  


//ν΄λΌμ΄μ–ΈνΈλ” Personν΄λμ¤μ—μ„ μ κ³µν•λ” μμ—… μ»¬λ ‰μ…μ—μ„ μμ—… μ •λ³΄λ¥Ό μ–»λ”λ‹¤.

numAdvancedCourses = aPerson.courses
  .filter(c => c.isAdvanced)
  .length
  ;

```

## π§· λ¦¬ν©ν„°λ§ ν›„

```javascript
// ν΄λΌμ΄μ–ΈνΈ
const basicCourseNames = readBasicCourseNames(filename);
aPerson.courses = basicCourseNames.map(name => new Course(name, false));

//ν΄λΌμ΄μ–ΈνΈ μ…μ¥μ—μ„λ” μ•„λμ μ½”λ“μ²λΌ μμ—… λ©λ΅μ„ μ§μ ‘ μμ •ν•λ”κ² ν›¨μ”¬ νΈν•  μ μλ‹¤.

// ν΄λΌμ΄μ–ΈνΈ
for(const name of readBasicCourseNames(filename)){
  aPerson.courses.push(new Course(name, false));
}
```

```javascript
// Person ν΄λμ¤...
addCourse(aCourse){
  this._courses.push(aCourse);
}
removeCourse(aCourse, fnIfAbsent = () => {throw new RangeError();}) {
  const index = this._course.indexOf(aCourse)
  if (index === -1) fnIfAbsent();
  else this._courses.splice(index, 1);
}
```

λ°©κΈ μ¶”κ°€ν• λ©”μ„λ“λ¥Ό νΈμ¶ν•λ„λ΅ μ•„λμ™€ κ°™μ΄ μ½”λ“λ¥Ό μμ •ν•λ‹¤.

```javascript
// ν΄λΌμ΄μ–ΈνΈ...
for(const name of readBasicCourseName(filename)) {
  aPerson.addCourse(new Course(name, false));
}
```

λ”μ΄μƒ `setCourses()`λ¥Ό μ‚¬μ©ν•  μΌμ΄ μ—†μΌλ‹ μ κ±°ν•΄μ¤€λ‹¤. μ„Έν„°λ¥Ό μ κ³µν•΄μ•Όν•  νΉλ³„ν• μ΄μ κ°€ μλ‹¤λ©΄ μ•„λμ μ½”λ“μ™€ κ°™μ΄ λ³µμ λ³Έμ„ ν•„λ“μ— μ €μ¥ν•λ„λ΅ ν•λ‹¤.

```javascript
// Person ν΄λμ¤...
set courses(aList) {this._courses = aList.slice();}
  
// λ©”μ„λ“λ“¤μ„ μ‚¬μ©ν•μ§€ μ•κ³  μ•„λ¬΄λ„ λ©λ΅μ„ λ³€κ²½ν•  μ μ—†κ²ν•κ³  μ‹¶λ‹¤λ©΄ μ•„λμ™€ κ°™μ΄ λ³µμ λ³Έμ„ μ κ³µν•λ„λ΅ ν•λ‹¤.
get courses() {return this._courses.slice();}
```

μ»¬λ ‰μ… κ΄€λ¦¬λ¥Ό μ±…μ„μλ” ν΄λμ¤λΌλ©΄ ν•­μƒ λ³µμ λ³Έμ„ μ κ³µν•΄μ•Ό ν•λ‹¤.
