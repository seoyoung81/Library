# âœï¸ 7.1 ë ˆì½”ë“œ ìº¡ìŠí™”í•˜ê¸° (Encapsulate Record)

ë¦¬íŒ©í„°ë§ ì „

```javascript
organization = {name: "ì• í¬ë¯¸ êµ¬ìŠ¤ë² ë¦¬", country: "GB"};
```

ë¦¬íŒ©í„°ë§ í›„

```javascript
class Organization {
  constructor(data) {
    this._name = data.name;
    this._name = data.country:
  }
  get name()  {return this._name;}
  set name(arg) {this._name = arg;}
  get country() {return this._country;}
  set country(arg) {this._country = arg;}
}
```

ì…ë ¥ ë°ì´í„° ë ˆì½”ë“œì™€ì˜ ì—°ê²°ì„ ëŠì–´ì¤€ë‹¤ëŠ” ì´ì ì´ ìƒê¸´ë‹¤. ì´ ë ˆì½”ë“œë¥¼ ì°¸ì¡°í•˜ì—¬ ìº¡ìŠí™”ë¥¼ ê¹° ìš°ë ¤ê°€ ìˆëŠ” ì½”ë“œê°€ ë§ì„ ë•Œê°€ ì¢‹ë‹¤.

## ğŸ§· ë°°ê²½

ğŸ“ë ˆì½”ë“œ: ì—°ê´€ëœ ì—¬ëŸ¬ ë°ì´í„°ë¥¼ ì§ê´€ì ì¸ ë°©ì‹ìœ¼ë¡œ ë¬¶ì„ ìˆ˜ ìˆì–´ì„œ ê°ê°ì„ ë”°ë¡œ ì·¨ê¸‰í•  ë•Œë³´ë‹¤ í›¨ì”¬ ì˜ë¯¸ ìˆëŠ” ë‹¨ìœ„ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.&#x20;

ğŸ“ë ˆì½”ë“œì˜ ë‹¨ì : ê³„ê³„ì‚°í•´ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ê°’ê³¼ ê·¸ë ‡ì§€ ì•Šì€ ê°’ì„ ëª…í™•íˆ êµ¬ë¶„í•´ ì €ì¥í•´ì•¼ í•˜ëŠ” ì ì´ ë²ˆê±°ë¡­ë‹¤. &#x20;

```javascript
{start: 1, end: 5} {start: 1, length: 5} 
```

ì™€ ê°™ì´ ì–´ë–¤ ì‹ìœ¼ë¡œ ì €ì¥í•˜ë“  ì‹œì‘ê³¼ ëê³¼ ê¸¸ì´ë¥¼ ì•Œ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

â†’ ê°€ë³€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ìš©ë„ë¡œëŠ” ë ˆì½”ë“œë³´ë‹¤ ê°ì²´ë¥¼ ì„ í˜¸í•œë‹¤.



**ë ˆì½”ë“œ êµ¬ì¡°**

* í•„ë“œ ì´ë¦„ì„ ë…¸ì¶œí•˜ëŠ” í˜•íƒœ
* (í•„ë“œë¥¼ ì™¸ë¶€ë¡œ ìˆ¨ê²¨ì„œ) ë‚´ê°€ ì›í•˜ëŠ” ì´ë¦„ì„ ì“¸ ìˆ˜ ìˆëŠ” í˜•íƒœ

## ğŸ§· ì ˆì°¨

1. ë ˆì½”ë“œë¥¼ ë‹´ì€ ë³€ìˆ˜ë¥¼ ìº¡ìŠí™”í•œë‹¤.
2. ë ˆì½”ë“œë¥¼ ê°ì‹¼ ë‹¨ìˆœí•œ í´ë˜ìŠ¤ë¡œ í•´ë‹¹ ë³€ìˆ˜ì˜ ë‚´ìš©ì„ êµì²´í•œë‹¤. ì´ í´ë˜ìŠ¤ì— ì›ë³¸ ë ˆì½”ë“œë¥¼ ë°˜í™˜í•˜ëŠ” ì ‘ê·¼ìë„ ì •ì˜í•˜ê³ , ë³€ìˆ˜ë¥¼ ìº¡ìŠí™”í•˜ëŠ” í•¨ìˆ˜ë“¤ì´ ì´ ì ‘ê·¼ìë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•œë‹¤.
3. í…ŒìŠ¤íŠ¸í•œë‹¤.
4. ì›ë³¸ ë ˆì½”ë“œ ëŒ€ì‹  ìƒˆë¡œ ì •ì˜í•œ í´ë˜ìŠ¤ íƒ€ì…ì˜ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë“¤ì„ ìƒˆë¡œ ë§Œë“ ë‹¤.
5. ë ˆì½”ë“œë¥¼ ë°˜í™˜í•˜ëŠ” ì˜ˆì „ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë¥¼ 4ì—ì„œ ë§Œë“  ìƒˆ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë°”ê¾¼ë‹¤. í•„ë“œì— ì ‘ê·¼í•  ë•ŒëŠ” ê°ì²´ì˜ ì ‘ê·¼ìë¥¼ ì‚¬ìš©í•œë‹¤. ì ì ˆí•œ ì ‘ê·¼ìê°€ ì—†ë‹¤ë©´ ì¶”ê°€í•œë‹¤. í•œ ë¶€ë¶„ì„ ë°”ê¿€ ë•Œë§ˆë‹¤ í…ŒìŠ¤íŠ¸í•œë‹¤.
6. í´ë˜ìŠ¤ì—ì„œ ì›ë³¸ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ëŠ” ì ‘ê·¼ìì™€ ì›ë³¸ ë ˆì½”ë“œë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë“¤ì„ ì œê±°í•œë‹¤.
7. í…ŒìŠ¤íŠ¸í•œë‹¤.
8. ë ˆì½”ë“œì˜ í•„ë“œë„ ë°ì´í„° êµ¬ì¡°ì¸ ì¤‘ì²© êµ¬ì¡°ë¼ë©´ ë ˆì½”ë“œ ìº¡ìŠí™”í•˜ê¸°ì™€ ì»¬ë ‰ì…˜ ìº¡ìŠí™”í•˜ê¸°ë¥¼ ì¬ê·€ì ìœ¼ë¡œ ì ìš©í•œë‹¤.

## ğŸ§· ë¦¬íŒ©í„°ë§ ì „

### ì¤‘ì²©ëœ ë ˆì½”ë“œ ìº¡ìŠí™”í•˜ê¸°

```javascript
"1920":{
  name: "ë§ˆí‹´ íŒŒìš¸ëŸ¬",
  id: "1920",
  usages: {
    "2016": {
      "1": 50,
      "2": 55,
      // ë‚˜ë¨¸ì§€ ë‹¬ì€ ìƒëµ.
    },
    "2015":{
      "1": 70,
      "2": 63,
      // ë‚˜ë¨¸ì§€ ë‹¬ì€ ìƒëµ.
    }
  }
},
"38673":{
  name: "ë‹ í¬ë“œ",
  id: "38673",
  // ë‹¤ë¥¸ ê³ ê° ì •ë³´ë„ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ì €ì¥ëœë‹¤.
}
```

ì¤‘ì²© ì •ë„ê°€ ì‹¬í• ìˆ˜ë¡ ì½ê±°ë‚˜ ì“¸ ë•Œ ë°ì´í„° êµ¬ì¡° ì•ˆìœ¼ë¡œ ë” ê¹Šìˆ™íˆ ë“¤ì–´ê°€ì•¼ í•œë‹¤.&#x20;

```javascript
// ì“°ê¸° ì˜ˆ...
customerData[customerID].usages[year][month] = amount;

// ì½ê¸° ì˜ˆ...
function compareUsage (customerID, laterYear, month) {
  const later = customerData[customerID].usages[laterYear][month];
  const earlier = customerData[customerID].usages[laterYear-1][month];
  return {laterAmount: later, change: later - earlier};
}
```

ë³€ìˆ˜ìº¡ìŠí™”ë¶€í„° ì‹œì‘í•œë‹¤.

```javascript
function getRawDataOfCustomer() {return customerData;}
function setRawDataOfCustomer(arg) {customerData = arg;}

// ì“°ê¸° ì˜ˆ...
getRawDataOfCustomers()[customerID].usages[year][month] = amount;

// ì½ê¸° ì˜ˆ...
function compareUsage(customerID, laterYear, month) {
  const later = getRawDataCustomers()[customerID].usages[laterYear][month];
  const earlier = getRawDataOfCustomers()[customerID].usages[laterYear-1][month];
  return {laterAmount: later, change: later - earlier};
}
```

ì „ì²´ ë°ì´í„° êµ¬ì¡°ë¥¼ í‘œí˜„í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ `CustomerData`ì™€ ê°™ì´ ì •ì˜í•˜ê³  ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¡œ ìƒˆë¡œ ë§Œë“ ë‹¤.

```javascript
class CustomerData{
  constructor(data) {
    this._data = data;
  }
}

// ìµœìƒìœ„...
function getCustomerData()  {return customerData;}
function getRawDataOfCustomers()  {return customerData._data;}
function setRawDataOfCustomers(arg) {customerData = new CustomerData(arg);}
```

ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ë°ì´í„°ë¥¼ ì“°ëŠ” ì½”ë“œë‹¤. `getRawDataOfCustomers()`ë¥¼ í˜¸ì¶œí•œ í›„ì— ë°ì´í„°ë¥¼ ë³€ê²½í•  ë•Œë„ ì£¼ì˜ë¥¼ í•´ì•¼í•œë‹¤.\
ê³ ê° ê°ì²´ì—ëŠ” ì„¸í„°ê°€ ì—†ìœ¼ë‹ˆ ë°ì´í„° êµ¬ì¡° ê¹Šì´ ê¹Œì§€ ë“¤ì–´ê°€ì„œ ê°’ì„ ë°”ê¾¸ëŠ”ë° ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ ë°ì´í„° êµ¬ì¡° ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” ì½”ë“œë¥¼ ì„¸í„°ë¡œ ë½‘ì•„ë‚´ëŠ” ì‘ì—…ì„ í•´ì¤€ë‹¤.

```javascript
// ì“°ê¸° ì˜ˆ....
setUsage(customerID, year, month, amount);

// ìµœìƒìœ„....
function setUsage(customerID, year, month, amonth){
  getRawDataOfCustomer()[customerID].usges[year][month] = amount;
}
```

ì´ì œ ì´ í•¨ìˆ˜ë¥¼ ê³ ê° ë°ì´í„° í´ë˜ìŠ¤ë¡œ ì˜®ê¸´ë‹¤.&#x20;

```javascript
// ì“°ê¸° ì˜ˆ...
getCustomerData().setUsage(customerID, year, month, amount);

// CustomerData í´ë˜ìŠ¤...
  setUsage(customerID, year, month, amount){
    this._data[customerID].usages[year][month] = amount;
  }
```

ìº¡ìŠí™”ì—ì„œëŠ” ê°’ì„ ìˆ˜ì •í•˜ëŠ” ë¶€ë¶„ì„ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚´ê³  í•œ ê³³ì— ëª¨ì•„ë‘ëŠ” ì¼ì´ êµ‰ì¥íˆ ì¤‘ìš”í•˜ë‹¤.&#x20;

ìš°ì„  `getRawDataOfCustomers()`ì—ì„œ ë°ì´í„°ë¥¼ ê¹Šì€ ë³µì‚¬í•´ì„œ ë°˜í™˜í•˜ì—¬ í™•ì¸í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

```javascript
// ìµœìƒìœ„...
  function getCustomerData() {return customerData;}
  function getRawDataOfCustomer() {return customerData.rawData;}
  function setRawDataOfCustomer(arg) {customerData = new CustomerData(arg);}
  

// CustomerData í´ë˜ìŠ¤...
  get rawData() {
    return _.cloneDeep(this._data)
  }
```

ê¹Šì€ ë³µì‚¬ëŠ” `lodash`ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ `cloneDeep()`ë¡œ ì²˜ë¦¬í•œë‹¤.

ì½ê¸°ëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í• ê¹Œ?\
ì²«ë²ˆì§¸ë¡œ ì„¸í„° ë•Œì™€ ê°™ì€ ë°©ë²•ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤. ì½ëŠ” ì½”ë“œë¥¼ ëª¨ë‘ ë…ë¦½í•¨ìˆ˜ë¡œ ì¶”ì¶œí•œ ë‹¤ìŒ ê³ ê° ë°ì´í„° í´ë˜ìŠ¤ë¡œ ì˜®ê¸°ëŠ” ê²ƒì´ë‹¤.&#x20;

```javascript
// CustomerDataí´ë˜ìŠ¤
usage(customerID, year, month){
  return this._data[customerID].usages[year][month]
}
  
// ìµœìƒìœ„...
function compareUsage (customerID, laterYear, month){
  const later = getCustomerData().usage(customerID, laterYear, month);
  const earlier = getCustomerData().usage(customerID, laterYear - 1, month);
  return {laterAmount: later, change: later - earlier};
}
```

ì´ ë°©ë²•ì˜ ì¥ì ì€ `customerData`ì˜ ëª¨ë“  ì“°ì„ì„ ëª…ì‹œì ì¸ APIë¡œ ì œê³µí•œë‹¤ëŠ” ê²ƒì´ë‹¤.\
ì´ í´ë˜ìŠ¤ë§Œ ë³´ë©´ ë°ì´í„° ì‚¬ìš©ë°©ë²•ì„ ëª¨ë‘ íŒŒì•…í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œëŠ” ì‹¤ì œ ë°ì´í„°ë¥¼ ì œê³µí•  ìˆ˜ë„ ìˆë‹¤.

í•˜ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ê°€ ë°ì´í„°ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ëª»í•˜ê²Œ ë§‰ì„ ë°©ë²•ì´ ì—†ì–´ì„œ `ëª¨ë“  ì“°ê¸°ë¥¼ í•¨ìˆ˜ ì•ˆì—ì„œ ì²˜ë¦¬í•œë‹¤`

ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ ì•ì—ì„œ ì‘ì„±í•œ `rawData()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚´ë¶€ ë°ì´í„°ë¥¼ ë³µì œí•´ì„œ ì œê³µí•˜ëŠ” ê²ƒì´ë‹¤.

```javascript
// CusomerData í´ë˜ìŠ¤
get rawData() {
  return _.cloneDeep(this._data);
}

// ìµœìƒìœ„...
function compareUsage (customerID, laterYear, month){
  const later = getCustomerData().rawData[customerID].usages[lastYear][month];
  const earlier = getCustomerData().rawData[customerID].usages[lastYear - 1][month];
  return {laterAmount: later, change: later - earlier};
}
```

ë‘ë²ˆì§¸ ë°©ë²•ì€ ë ˆì½”ë“œ ìº¡ìŠí™”ë¥¼ ì¬ê·€ì ìœ¼ë¡œ í•˜ëŠ” ê²ƒìœ¼ë¡œì¨ ê°€ì¥ í™•ì‹¤í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆë‹¤.\
ì´ë°©ë²•ì„ ì ìš©í•˜ë ¤ë©´ ê³ ê° ì •ë³´ ë ˆì½”ë“œë¥¼ í´ë˜ìŠ¤ë¡œ ë°”ê¾¸ê³ , ë°”ë¡œ ë’¤ì— ë‚˜ì˜¬ ì»¬ë ‰ì…˜ ìº¡ìŠí™”í•˜ê¸°ë¡œ ë ˆì½”ë“œë¥¼ ë‹¤ë£¨ëŠ” ì½”ë“œë¥¼ ë¦¬íŒ©í„°ë§í•´ì„œ ê³ ê° ì •ë³´ë¥¼ ë‹¤ë£¨ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

ë•Œë¡œëŠ” ìƒˆë¡œë§Œë“  í´ë˜ìŠ¤ì™€ ê²Œí„°ë¥¼ ì˜ í˜¼í•©í•´ì„œ, ê²Œí„°ëŠ” ë°ì´í„° êµ¬ì¡°ë¥¼ ê¹Šì´ íƒìƒ‰í•˜ê²Œ ë§Œë“¤ê³ , ì›ë³¸ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ì§€ ë§ê³  ê°ì²´ë¡œ ê°ì‹¸ì„œ ë°˜í™˜í•˜ëŠ”ê²Œ íš¨ê³¼ì ì¼ ìˆ˜ ìˆë‹¤.



