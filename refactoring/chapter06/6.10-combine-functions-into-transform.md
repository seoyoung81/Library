# âœï¸ 6.10 ì—¬ëŸ¬ í•¨ìˆ˜ë¥¼ ë³€í™˜ í•¨ìˆ˜ë¡œ ë¬¶ê¸° (Combine Functions into Transform)

ë¦¬íŒ©í„°ë§ ì „

```javascript
function base(aReading) {...}
function taxableCharge(aReading) {...}
```

ë¦¬íŒ©í„°ë§ í›„

```javascript
function enrichReading(argReading) {
  const aReading = _.cloneDeep(argReading);
  aReading.baseCharge = base(aReading);
  aReading.taxableCharge = taxableCharge(aReading);
  return aReading;
}
```

## ğŸ§· ë°°ê²½

ê°™ë“  ë„ì¶œ ë¡œì§ì´ ë°˜ë³µë˜ëŠ” ê²½ìš° ë³€í™˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë„ì¶œì‘ì—…ì„ í•œë° ëª¨ì•„ ê²€ìƒ‰ê³¼ ê°±ì‹ ì„ ì¼ê´€ëœ ì¥ì†Œì—ì„œ ì²˜ë¦¬í•˜ê³  ë¡œì§ ì¤‘ë³µì„ ë§‰ëŠ”ë‹¤. ë³€í™˜í•¨ìˆ˜ëŠ” ì›ë³¸ ë°ì´í„°ë¥¼ ì…ë ¥ ë°›ì•„ì„œ í•„ìš”í•œ ì •ë³´ë¥¼ ëª¨ë‘ ë„ì¶œí•œ ë’¤, ê°ê°ì„ ì¶œë ¥ ë°ì´í„° í•„ë“œì— ë„£ì–´ ë°˜í™˜í•œë‹¤. ë„ì¶œ ê³¼ì •ì„ ê²€í† í•  ë•Œ ë³€í™˜ í•¨ìˆ˜ë§Œ ì‚´í´ë³´ë©´ ëœë‹¤.

### ğŸ“ í´ë˜ìŠ¤ ë¬¶ê¸° VS ë³€í™˜ í•¨ìˆ˜ë¡œ ë¬¶ê¸°

* ì›ë³¸ ë°ì´í„°ê°€ ì½”ë“œ ì•ˆì—ì„œ ê°±ì‹  ë  ë•ŒëŠ” â†’ í´ë˜ìŠ¤ë¡œ ë¬¶ê¸°
* ë„ì¶œ ë¡œì§ì˜ ì¤‘ë³µì„ í”¼í•˜ê³  ì‹¶ì€ ê²½ìš° â†’ ë³€í™˜ í•¨ìˆ˜ë¡œ ë¬¶ê¸°

## ğŸ§· ì ˆì°¨

1. ë³€í™˜í•  ë ˆì½”ë“œë¥¼ ì…ë ¥ë°›ì•„ì„œ ê°’ì„ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ëŠ” ë³€í™˜ í•¨ìˆ˜ë¥¼ ë§Œë“ ë‹¤.
2. ë¬¶ì„ í•¨ìˆ˜ ì¤‘ í•¨ìˆ˜ í•˜ë‚˜ë¥¼ ê³¨ë¼ì„œ ë³¸ë¬¸ ì½”ë“œë¥¼ ë³€í™˜ í•¨ìˆ˜ë¡œ ì˜®ê¸°ê³ , ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë ˆì½”ë“œì— ìƒˆ í•„ë“œë¡œ ê¸°ë¡í•œë‹¤. ê·¸ëŸ° ë‹¤ìŒ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ ì´ í•„ë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•œë‹¤.
3. í…ŒìŠ¤íŠ¸í•œë‹¤.
4. ë‚˜ë¨¸ì§€ ê´€ë ¨ í•¨ìˆ˜ë„ ìœ„ ê³¼ì •ì— ë”°ë¼ ì²˜ë¦¬í•œë‹¤.

## ğŸ§· ë¦¬íŒ©í„°ë§ ì „

```javascript
// í´ë¼ì´ì–¸íŠ¸ 1
const aReading = acquireReading();
const baseCharge = baseRate(aReading.month, aReading.year) * aReading.quantity;

// í´ë¼ì´ì–¸íŠ¸ 2
const aReading = acquireReading();
const base = (baseRate(aReading.month, aReading.year) * aReading.quantity);
const taxableCharge = Math.max(0, base = taxThreshold(aReading.year));    // ì¤‘ë³µ ì½”ë“œëŠ” ë‚˜ì¤‘ì— ë¡œì§ì„ ìˆ˜ì •í•  ë•Œ í˜ë“¤ë‹¤. (ë°˜ë“œì‹œ ìˆ˜ì •í•  ì¼ì´ ìƒê¸´ë‹¤.)

// í´ë¼ì´ì–¸íŠ¸ 3
const aReading = acquireReading();
const basicChargeAmount = calculateBaseCharge(aReading);
function calculateBaseCharge(aReading) {
 return baseRate(aReading.month, aReading.year) * aReading.quantity);
}
```

## ğŸ§· ë¦¬íŒ©í„°ë§ í›„

```javascript
function enrichReading(original) {
  const result = _.cloneDeep(original) // lodash cloneDeep

  result.baseCharge = calculateBaseCharge(result);
  result.taxableCharge = Mtah.max(0, aReading.baseCharge - taxThreshole(aReading.year));
  
  return result
}

const rawReading = acquireReading();
const aReading = enrichReading(rawReading);
const base = aReading.baseCharge;
const taxableCharge = aReading.tadableCharge;
```
