# βοΈ 10.5 νΉμ΄ μΌ€μ΄μ¤ μ¶”κ°€ν•κΈ° (Introduce Special Case)

λ¦¬ν©ν„°λ§ μ „

```javascript
if (aCustomer === "λ―Έν™•μΈ κ³ κ°") customerName = "κ±°μ£Όμ";
```

λ¦¬ν©ν„°λ§ ν›„

```javascript
class UnknownCustomer {
    get name() {return "κ±°μ£Όμ";}
```

## π§· λ°°κ²½

μ½”λ“λ² μ΄μ¤μ—μ„ νΉμ • κ°’μ— λ€ν•΄ λ‘κ°™μ΄ λ°μ‘ν•λ” μ½”λ“κ°€ μ—¬λ¬ κ³³μ΄λΌλ©΄ κ·Έ λ°μ‘λ“¤μ„ ν• λ°λ΅ λ¨μΌλ” κ² ν¨μ¨μ μ΄λ‹¤. μ΄λ• νΉμν• κ²½μ°μ κ³µν†µ λ™μ‘μ„ μ”μ† ν•λ‚μ— λ¨μ•„μ„ μ‚¬μ©ν•λ” νΉμ΄ μΌ€μ΄μ¤ ν¨ν„΄μ„ μ‚¬μ©ν•λ‹¤.

λ„(null)μ€ νΉμ΄ μΌ€μ΄μ¤λ΅ μ²λ¦¬ν•΄μ•Ό ν•  λ•κ°€ λ§λ‹¤. κ·Έλμ„ μ΄ ν¨ν„΄μ„ λ„ κ°μ²΄ ν¨ν„΄μ΄λΌκ³ λ„ ν•λ‹¤.

## π§· μ μ°¨

1. λ¦¬ν©ν„°λ§μ λ€μƒμ΄ λ  μ†μ„±μ„ λ‹΄μ€ λ°μ΄ν„° κµ¬μ΅°(νΉμ€ ν΄λμ¤)λ¥Ό μ»¨ν…μ΄λ„λΌκ³  ν•λ‹¤.
2. μ»¨ν…μ΄λ„μ— νΉμ΄ μΌ€μ΄μ¤μΈμ§€λ¥Ό κ²€μ‚¬ν•λ” μ†μ„±μ„ μ¶”κ°€ν•κ³ , `false`λ¥Ό λ°ν™ν•κ² ν•λ‹¤.
3. νΉμ΄ μΌ€μ΄μ¤ κ°μ²΄λ¥Ό λ§λ“¦. μ΄ κ°μ²΄λ” νΉμ΄ μΌ€μ΄μ¤μΈμ§€λ¥Ό κ²€μ‚¬ν•λ” μ†μ„±λ§ ν¬ν•¨ν•λ©°, μ΄ μ†μ„±μ€ `true`λ¥Ό λ°ν™ν•κ² ν•λ‹¤.&#x20;
4. ν΄λΌμ΄μ–ΈνΈμ—μ„ νΉμ΄ μΌ€μ΄μ¤μΈμ§€λ¥Ό κ²€μ‚¬ν•λ” μ½”λ“λ¥Ό ν•¨μλ΅ μ¶”μ¶ν•λ‹¤. λ¨λ“  ν΄λΌμ΄μ–ΈνΈκ°€ κ°’μ„ μ§μ ‘ λΉ„κµν•λ” λ€μ‹  λ°©κΈ μ¶”μ¶ν• ν•¨μλ¥Ό μ‚¬μ©ν•λ„λ΅ κ³ μΉλ‹¤.
5. μ½”λ“μ— μƒλ΅μ΄ νΉμ΄ μΌ€μ΄μ¤ λ€μƒμ„ μ¶”κ°€ν•¨. ν•¨μμ λ°ν™ κ°’μΌλ΅ λ°›κ±°λ‚ λ³€ν™ ν•¨μλ¥Ό μ μ©ν•λ©΄ λλ‹¤.
6. νΉμ΄ μΌ€μ΄μ¤λ¥Ό κ²€μ‚¬ν•λ” ν•¨μ λ³Έλ¬Έμ„ μμ •ν•μ—¬ νΉμ΄ μΌ€μ΄μ¤ κ°μ²΄μ μ†μ„±μ„ μ‚¬μ©ν•λ‹¤.
7. ν…μ¤νΈν•λ‹¤.
8. μ—¬λ¬ ν•¨μλ¥Ό ν΄λμ¤λ΅ λ¬¶κΈ°λ‚ μ—¬λ¬ ν•¨μλ¥Ό λ³€ν™ ν•¨μλ΅ λ¬¶κΈ°λ¥Ό μ μ©ν•μ—¬ νΉμ΄ μΌ€μ΄μ¤λ¥Ό μ²λ¦¬ν•λ” κ³µν†µ λ™μ‘μ„ μƒλ΅μ΄ μ”μ†λ΅ μ®κΈ΄λ‹¤.
9. μ•„μ§λ„ νΉμ΄ μΌ€μ΄μ¤ κ²€μ‚¬ ν•¨μλ¥Ό μ΄μ©ν•λ” κ³³μ΄ λ‚¨μ•„ μλ‹¤λ©΄ κ²€μ‚¬ ν•¨μλ¥Ό μΈλΌμΈν•λ‹¤.

## π§· μμ‹

### π§· λ¦¬ν©ν„°λ§ μ „

```ts
class Site {
  get customer() { return this._customer; }
}

class Customer {
  get name() { ...  }
  get billingPlan() { ... }
  set billingPlan(arg) { ... }
  get paymentHistory() { ... }
}

// ν΄λΌμ΄μ–ΈνΈ 1
const aCustomer = site.customer;
let customerName;
if (aCustomer === "λ―Έν™•μΈ κ³ κ°") {
  customerName = "κ±°μ£Όμ";
} else {
  customerName = aCustomer.name;
}

// ν΄λΌμ΄μ–ΈνΈ 2
const plan = (aCustomer === "λ―Έν™•μΈ κ³ κ°") ?
      registry.billingPlans.basic
			: aCustomer.billingPlans;

// ν΄λΌμ΄μ–ΈνΈ 3
if (aCustomer !== "λ―Έν™•μΈ κ³ κ°") {
  aCustomer.billingPlan = newPlan;
}

// ν΄λΌμ΄μ–ΈνΈ 4
const weekDelinquent = (aCustomer === "λ―Έν™•μΈ κ³ κ°") ?
      0
      : aCustomer.paymentHistory.weeksDelinquentInLastYear;
```

### π§· λ¦¬ν©ν„°λ§ ν›„

```ts
// ν΄λΌμ΄μ–ΈνΈλ“¤μ€ μ•λ ¤μ§€μ§€ μ•μ€ β€λ―Έν™•μΈ κ³ κ°β€ ν•„λ“λ¥Ό class Site {
  get customer() {
    return this._customer === 'λ―Έν™•μΈ κ³ κ°' ? new UnknownCustomer() : this._customer;
  }
}

class Customer {
  get isUnknown() {
    return false;
  }
}

class UnknownCustomer {
  get isUnknown() {
    return true;
  }

  get name() {
    return 'κ±°μ£Όμ';
  }

  get billingPlan() {
    return registry.billingPlans.basic;
  }

  set billingPlan(arg) {
    // ...
  }
}

function isUnknown(arg) {
  if (!(arg instanceof Customer || arg instanceof UnknownCustomer)) {
    throw new Error(`μλ»λ κ°’κ³Ό λΉ„κµ: <${arg}>`);
  }
  return arg.isUnknown;
}

// ν΄λΌμ΄μ–ΈνΈ (μ½λ” κ²½μ°)
const plan = aCustomer.billingPlan;

// ν΄λΌμ΄μ–ΈνΈ (μ“°λ” κ²½μ°)
aCustomer.billingPlan = newPlan;
class NullPaymentHistory {
  get weeksDelinquentInLastYear() {
    return 0;
  }
}

// ν΄λΌμ΄μ–ΈνΈ 4
const weekDelinquent = aCustomer.paymentHistory.weeksDelinquentInLastYear;
```

