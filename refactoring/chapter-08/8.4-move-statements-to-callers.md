# âœï¸ 8.4 ë¬¸ì¥ì„ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì˜®ê¸°ê¸° (Move Statements to Callers)

â†”ï¸ ë¬¸ì¥ì„ í•¨ìˆ˜ë¡œ ì˜®ê¸°ê¸°

ë¦¬íŒ©í„°ë§ ì „

```javascript
emitPhotoData(outStream, person.photo);

function emitPhotoData(outStream, photo){
	outStream.write(photo.title);
	outStream.write(photo.location);
}
```

ë¦¬íŒ©í„°ë§ í›„

```javascript
emitPhotoData(outStream, person.photo);
	outStream.write(photo.location);

function emitPhotoData(outStream, photo){
	outStream.write(photo.title);
}
```

## ğŸ§· ë°°ê²½

í•¨ìˆ˜ëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ë§Œë“œëŠ” ì¶”ìƒí™” ë¸”ë¡ì´ë‹¤. í•˜ì§€ë§Œ ì¶”ìƒí™”ì˜ ê²½ê³„ë¥¼ ì˜¬ë°”ë¥´ê²Œ ê¸‹ê¸°ê°€ ì–´ë µë‹¤. í•¨ìˆ˜ ê´€ì ì—ì„œ ìƒê°í•´ë³´ë©´, ì´ˆê¸°ì—ëŠ” ì‘ì§‘ë„ ë†’ê³  í•œ ê°€ì§€ ì¼ë§Œ ìˆ˜í–‰í•˜ë˜ í•¨ìˆ˜ê°€ ì–´ëŠìƒˆ ë‘˜ ì´ìƒì˜ ë‹¤ë¥¸ ì¼ì„ ìˆ˜í–‰í•˜ê²Œ ë°”ë€” ìˆ˜ë„ ìˆë‹¤.

ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš©í•˜ë˜ ê¸°ëŠ¥ì´ ì¼ë¶€ í˜¸ì¶œìì—ê²Œ ë‹¤ë¥´ê²Œ ë™ì‘í•˜ë„ë¡ ë°”ë€Œì–´ì•¼ í•  ë•Œ ë°œìƒí•œë‹¤. ì´ë•Œ, ë¬¸ì¥ì„ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì˜®ê¸°ê¸° ë¦¬íŒ©í„°ë§ì„ ì ìš©í•˜ë©´ ë‹¬ë¼ì§€ëŠ” ë™ì‘ì„ í˜¸ì¶œìë¡œ ì˜®ê¸´ ë’¤ì— í•„ìš”í•  ë•Œë§ˆë‹¤ ë…ë¦½ì ìœ¼ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

## ğŸ§· ì ˆì°¨

1\. í˜¸ì¶œìê°€ í•œë‘ ê°œ ë¿ì´ê³  í”¼í˜¸ì¶œ í•¨ìˆ˜ë„ ê°„ë‹¨í•œ ìƒí™©ì´ë¼ë©´, í”¼í˜¸ì¶œ í•¨ìˆ˜ì˜ ì²˜ìŒ( í˜¹ì€ ë§ˆì§€ë§‰) ì¤„ì„ ì˜ë¼ë‚´ì–´ í˜¸ì¶œìë¡œ ë³µì‚¬í•´ ë„£ëŠ”ë‹¤.

2\. ë” ë³µì¡í•œ ìƒí™©ì—ì„œëŠ”, ì´ë™í•˜ì§€ ì•Šê¸¸ ì›í•˜ëŠ” ëª¨ë“  ë¬¸ì¥ì„ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•œ ë‹¤ìŒ ê²€ìƒ‰í•˜ê¸° ì‰¬ìš´ ì„ì‹œ ì´ë¦„ì„ ì§€ì–´ì¤€ë‹¤.

3\. ì›ë˜ í•¨ìˆ˜ë¥¼ ì¸ë¼ì¸ í•œë‹¤.

4\. ì¶”ì¶œëœ í•¨ìˆ˜ì˜ ì´ë¦„ì„ ì›ë˜ í•¨ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•œë‹¤.

## ğŸ§· ì˜ˆì‹œ

```javascript
function renderPerson(outStream, person) {
  outStream.write(`<p>${person.name}</p>\n`);
  renderPhoto(outStream, persons.photo);
  emitPhotoData(outStream, person.photo);
}

function listRecentPhotos(outStream, photos) {
  photos
    .filter(p => p.data > recentDateCutoff())
    .forEach(p => {
      outStream.write("<div>\n"
      emitPhotoData(outStream, p);
      outStream.write("/</div>\n");
      });
  }

function emitPhotoData(outStream, photo) {
  outStream.write(`<p>ì œëª©: ${photo.title}</p>`);
  outStream.write(`<p>ë‚ ì§œ: ${photo.date.toDateString()}</p>`);
  outStream.write(`<p>ìœ„ì¹˜: ${photo.location}</p>`);
}
```

ğŸ“ `renderPerson()`ì€ ê·¸ëŒ€ë¡œ ë‘” ì±„ `listRecentPhotos()`ê°€ ìœ„ì¹˜ ì •ë³´ë¥¼ ë‹¤ë¥´ê²Œ ë Œë”ë§ í•˜ë„ë¡ ë§Œë“¤ì–´ë³´ì.

ë‹¨ìˆœí•œ ìƒí™©ì—ì„œëŠ” `renderPerson()`ì˜ ë§ˆì§€ë§‰ ì¤„ì„ ì˜ë¼ë‚´ì–´ ë‘ í˜¸ì¶œ ì½”ë“œ ì•„ë˜ì— ë¶™ì—¬ë„£ìœ¼ë©´ ëì´ë‹¤. ê¹Œë‹¤ë¡œìš´ ë°©ë²•ìœ¼ë¡œ í•´ë³´ì.

1. `emitPhotoData()`ì— ë‚¨ê¸¸ ì½”ë“œë¥¼ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•œë‹¤.

```javascript
function renderPerson(outStream, person) {
  outStream.write(`<p>${person.name}</p>\n`);
  renderPhoto(outStream, persons.photo);
  emitPhotoData(outStream, person.photo);
}

function listRecentPhotos(outStream, photos) {
  photos
    .filter(p => p.data > recentDateCutoff())
    .forEach(p => {
      outStream.write("<div>\n"
      emitPhotoData(outStream, p);
      outStream.write("/</div>\n");
      });
  }

function emitPhotoData(outStream, photo) {
  // í•¨ìˆ˜ ì¶”ì¶œ
  zztmp(outStream, photo);
  outStream.write(`<p>ìœ„ì¹˜: ${photo.location}</p>`); 
}

function zztmp(outStream, photo) {
  // ë°”ë€Œì§€ ì•Šì„ ì½”ë“œ
  outStream.write(`<p>ì œëª©: ${photo.title}</p>`);
  outStream.write(`<p>ë‚ ì§œ: ${photo.date.toDateString()}</p>`); 
}
```

2. í”¼í˜¸ì¶œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œìë“¤ë¡œ ì¸ë¼ì¸í•œë‹¤.

```javascript
function renderPerson(outStream, person) {
  outStream.write(`<p>${person.name}</p>\n`);
  renderPhoto(outStream, persons.photo);
  // ë¶„ë¦¬í•˜ê¸°
  zztmp(outStream, person.photo);
  outStream.write(`<p>ìœ„ì¹˜: ${photo.location}</p>`);  // ì²«ë²ˆì§¸ í˜¸ì¶œ ìœ„ì¹˜ë¡œ ì¸ë¼ì¸
}

function listRecentPhotos(outStream, photos) {
  photos
    .filter(p => p.data > recentDateCutoff())
    .forEach(p => {
      outStream.write("<div>\n");
      // ë¶„ë¦¬í•˜ê¸°
      zztmp(outStream, p);
      outStream.write(`<p>ìœ„ì¹˜: ${photo.location}</p>`);  // ë‘ë²ˆì§¸ í˜¸ì¶œ ìœ„ì¹˜ë¡œ ì¸ë¼ì¸
      outStream.write("/</div>\n");
      });
  }

function emitPhotoData(outStream, photo) {
  // í•¨ìˆ˜ ì¶”ì¶œ
  zztmp(outStream, photo);
  outStream.write(`<p>ìœ„ì¹˜: ${photo.location}</p>`); 
}

function zztmp(outStream, photo) {
  // ë°”ë€Œì§€ ì•Šì„ ì½”ë“œ
  outStream.write(`<p>ì œëª©: ${photo.title}</p>`);
  outStream.write(`<p>ë‚ ì§œ: ${photo.date.toDateString()}</p>`); 
}
```

3. ì›ë˜ í•¨ìˆ˜ë¥¼ ì§€ìš°ê³ , `zztmp()` ì´ë¦„ì„ ì›ë˜ í•¨ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ ë˜ëŒë¦°ë‹¤.

```javascript
function renderPerson(outStream, person) {
  outStream.write(`<p>${person.name}</p>\n`);
  renderPhoto(outStream, persons.photo);
  emitPhotoData(outStream, person.photo);
  outStream.write(`<p>ìœ„ì¹˜: ${photo.location}</p>`); 
}

function listRecentPhotos(outStream, photos) {
  photos
    .filter(p => p.data > recentDateCutoff())
    .forEach(p => {
      outStream.write("<div>\n");
      emitPhotoData(outStream, p);
      outStream.write(`<p>ìœ„ì¹˜: ${photo.location}</p>`); 
      outStream.write("/</div>\n");
      });
  }

function emitPhotoData(outStream, photo) {
  outStream.write(`<p>ì œëª©: ${photo.title}</p>`);
  outStream.write(`<p>ë‚ ì§œ: ${photo.date.toDateString()}</p>`); 
}
```
